Search.setIndex({"docnames": ["BendingRadius", "basic_example", "code_docs", "examples", "grid_merge", "index", "new_data_exporter", "new_data_loader", "phase_space_format", "resampling_via_gaussian_kde", "supported_particles", "units"], "filenames": ["BendingRadius.md", "basic_example.ipynb", "code_docs.rst", "examples.rst", "grid_merge.ipynb", "index.rst", "new_data_exporter.ipynb", "new_data_loader.ipynb", "phase_space_format.md", "resampling_via_gaussian_kde.ipynb", "supported_particles.md", "units.ipynb"], "titles": ["Express bending radius in kinetic energy", "Basic Example", "Code Documentation", "Examples", "Compress phase space via regrid/merge operations", "ParticlePhaseSpace", "Writing a new data exporter", "Writing a new data loader", "Phase Space Format", "Up/Down sampling phase space data using gaussian KDE", "Supported particles", "Working with different units"], "terms": {"The": [0, 1, 2, 4, 6, 7, 8, 9, 10, 11], "particl": [0, 1, 3, 5, 6, 7, 8, 11], "magnet": 0, "field": [0, 1, 2], "i": [0, 1, 2, 4, 6, 7, 9, 10, 11], "given": [0, 1, 2, 11], "begin": 0, "equat": 0, "label": [0, 11], "eqn": 0, "1": [0, 1, 2, 4, 6, 7, 8, 9, 10, 11], "tag": [0, 11], "r": [0, 1, 2, 4, 7, 9, 11], "frac": 0, "p": [0, 1, 2, 4, 6, 7, 8, 9, 11], "qb": 0, "gamma": [0, 1, 4, 9, 10], "m_0": 0, "v": 0, "beta": [0, 1, 4, 9], "c": [0, 1, 2, 4, 6, 7, 8, 9, 10, 11], "end": [0, 2], "meanwhil": [0, 1], "relatavist": 0, "e_k": [0, 8], "mc": 0, "2": [0, 1, 2, 4, 6, 7, 8, 9, 10, 11], "m_0c": 0, "sqrt": [0, 8], "our": [0, 2, 6, 7, 9], "goal": [0, 7], "term": [0, 8], "firstli": 0, "we": [0, 1, 2, 4, 6, 7, 8, 9, 11], "can": [0, 1, 2, 4, 6, 7, 8, 9, 11], "us": [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 11], "momentum": [0, 1, 3, 5, 6, 7, 11], "relat": 0, "e": [0, 2, 6, 7, 8, 9, 11], "2c": 0, "4": [0, 1, 4, 6, 7, 9, 11], "ek": [0, 1, 6, 7, 8], "e0": 0, "e_0": [0, 8], "2e_k": 0, "now": [0, 1, 4, 7, 9, 11], "assum": [0, 9], "ev": [0, 8, 11], "have": [0, 1, 2, 4, 6, 7, 8, 9, 11], "just": [0, 1, 2, 6, 7, 9, 11], "calcul": [0, 2, 3, 4, 8], "unit": [0, 1, 2, 3, 5, 6, 7], "thi": [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11], "directli": [0, 1, 9], "would": [0, 1, 2, 6, 7, 8, 9, 11], "convert": [0, 2, 6, 8, 11], "si": 0, "kg": [0, 8, 11], "m": [0, 2, 4, 8, 11], "": [0, 1, 4, 6, 8, 9, 11], "p_": 0, "q": [0, 2, 8], "substitut": 0, "bc": 0, "note": [0, 1, 2, 3, 6, 7, 8, 9, 11], "formula": 0, "electron": [0, 1, 2, 4, 6, 7, 8, 10], "volt": 0, "rearrang": 0, "slightli": 0, "At": [0, 2], "point": [0, 2], "ar": [0, 1, 2, 4, 6, 7, 9, 10, 11], "still": [0, 9], "defin": [0, 1, 2, 3, 8], "If": [0, 1, 2, 4, 6, 7, 11], "instead": [0, 2, 11], "joul": 0, "bcq": 0, "which": [0, 1, 2, 4, 7, 9, 11], "same": [0, 1, 2, 4, 6], "magdalena": 0, "answer": 0, "let": [0, 1, 4, 6, 7, 9, 11], "check": [0, 1, 4, 6, 7, 9], "all": [0, 1, 2, 6, 7, 8, 9, 11], "make": [0, 1, 7, 8], "sens": [0, 1], "some": [0, 1, 4, 6, 7, 8, 9, 11], "basic": [0, 2, 3, 5, 7], "import": [0, 2, 3, 4, 5, 6, 7, 8, 9, 11], "numpi": [0, 4, 6, 7, 9], "np": [0, 2, 4, 6, 7, 9], "from": [0, 1, 2, 4, 6, 7, 8, 9, 11], "scipi": 0, "constant": 0, "elementary_charg": 0, "b": [0, 9], "t": [0, 1, 2, 4, 9, 11], "10e6": 0, "ek_si": 0, "j": 0, "0": [0, 1, 2, 4, 6, 7, 8, 9, 10, 11], "511e6": 0, "e0_si": 0, "first": [0, 1, 2, 4, 6, 7, 9, 11], "version": 0, "r_brendan": 0, "r_magdalena": 0, "print": [0, 2, 9, 11], "f": [0, 2, 6, 7, 9], "n": [0, 6, 7, 11], "nbend": 0, "nenergi": 0, "1e6": 0, "2f": 0, "mev": [0, 1, 2, 4, 6, 7, 8, 9, 10, 11], "ncharg": 0, "2e": 0, "nin": 0, "ni": 0, "brendan": [0, 9], "3f": 0, "10": [0, 1, 2, 4, 9, 11], "00": [0, 9], "charg": [0, 8, 10], "60e": 0, "19": [0, 1, 10], "In": [0, 1, 2, 4, 7, 8, 9, 11], "018": 0, "onli": [0, 1, 2, 6, 8, 9, 11], "other": [0, 1, 2, 8, 11], "thing": [0, 4], "worth": 0, "here": [0, 1, 2, 4, 8], "light": 0, "ratio": 0, "rest": [0, 1, 8], "becom": 0, "small": [0, 9], "high": 0, "second": [0, 1, 9], "ha": [0, 2, 7, 9], "valu": [0, 1, 2, 4, 6, 7, 8, 9, 11], "so": [0, 1, 4, 7, 9, 10, 11], "ignor": 0, "write": [0, 1, 2, 3, 5, 8], "much": [0, 4, 9], "more": [0, 1, 2, 9], "simpli": [0, 11], "approx": 0, "r_approxim": 0, "approxim": [0, 2], "nwhich": 0, "wrong": 0, "100": [0, 2, 4], "ab": [0, 4, 9], "017": 0, "75": 0, "step": [1, 3, 11], "analysi": [1, 2, 9], "code": [1, 4, 5, 7, 8, 10, 11], "alwai": [1, 2, 4, 8, 9], "handl": [1, 2, 7, 9], "through": 1, "an": [1, 2, 6, 7, 8, 9, 10], "instanc": [1, 2, 7, 8, 11], "dataload": [1, 2, 4, 6, 7, 8, 9, 11], "class": [1, 2, 6, 7], "work": [1, 3, 4, 5, 6, 7, 8], "topa": [1, 2, 6], "For": [1, 4, 7, 8, 9, 11], "list": [1, 2, 6, 11], "current": [1, 9, 10, 11], "avail": [1, 3, 6, 7, 8], "see": [1, 4, 8, 9], "instruct": 1, "new": [1, 2, 3, 5, 8, 9], "pathlib": [1, 2, 4, 6, 7, 9, 11], "path": [1, 2, 4, 6, 7, 9, 11], "sy": [1, 4, 6, 7, 9, 11], "append": [1, 4, 6, 7, 9, 11], "necessari": [1, 4, 9, 11], "when": [1, 2, 4, 9, 11], "librari": [1, 2, 4, 5, 7, 9, 11], "instal": [1, 4, 7, 9, 11], "particlephasespac": [1, 2, 4, 6, 7, 9, 10, 11], "phasespac": [1, 2, 4, 6, 7, 8, 9, 11], "test_data_loc": [1, 4, 9, 11], "test": [1, 2, 3, 4, 7, 8, 9, 10, 11], "test_data": [1, 2, 4, 6, 7, 9, 11], "coll_phasespace_xang_0": [1, 2, 4, 6, 9, 11], "00_yang_0": [1, 2, 4, 6, 9, 11], "00_angular_error_0": [1, 2, 4, 6, 9, 11], "phsp": [1, 2, 4, 6, 9, 11], "absolut": [1, 2, 4, 7, 9, 11], "ps_data": [1, 2, 4, 6, 9, 11], "load_topasdata": [1, 2, 4, 6, 9, 11], "onc": 1, "pass": [1, 6, 7, 8, 10, 11], "underli": [1, 2], "store": [1, 7], "panda": [1, 2], "frame": [1, 7], "you": [1, 2, 4, 6, 7, 8, 9, 11], "shouldn": 1, "often": [1, 9], "want": [1, 2, 4, 6, 7, 8, 11], "interact": [1, 2, 9], "take": [1, 9], "quick": 1, "look": [1, 6, 7, 9, 11], "know": [1, 9], "what": [1, 4, 7, 8, 9, 11], "like": [1, 2, 6, 7, 8, 9, 11], "3": [1, 4, 6, 7, 9, 11], "head": [1, 11], "type": [1, 2, 6, 7, 8, 11], "pdg_code": [1, 2, 6, 8, 10, 11], "x": [1, 2, 4, 6, 7, 8, 9, 11], "mm": [1, 2, 4, 6, 7, 8, 9, 11], "y": [1, 2, 4, 6, 7, 8, 9, 11], "z": [1, 2, 4, 6, 7, 8, 9, 11], "weight": [1, 2, 4, 6, 7, 8, 9, 11], "id": [1, 2, 6, 7, 8, 11], "time": [1, 2, 4, 6, 7, 8, 9, 11], "px": [1, 2, 4, 6, 7, 8, 9, 11], "py": [1, 2, 4, 6, 7, 8, 9, 10, 11], "pz": [1, 2, 4, 6, 7, 8, 11], "22": [1, 10, 11], "971177": [1, 11], "817280": [1, 11], "396": [1, 11], "01": [1, 4, 9, 11], "008856": [1, 11], "010509": [1, 11], "184060": [1, 11], "916198": [1, 11], "839298": [1, 11], "003894": [1, 11], "008249": [1, 11], "560114": [1, 11], "5": [1, 4, 6, 7, 9, 11], "258902": [1, 11], "11": [1, 2, 4, 6, 9, 10, 11], "318420": [1, 11], "193061": [1, 11], "377104": [1, 11], "219742": [1, 11], "15": [1, 11], "326971": [1, 11], "25": [1, 11], "628899": [1, 11], "102889": [1, 11], "362594": [1, 11], "414843": [1, 11], "241948": [1, 11], "401026": [1, 11], "000192": [1, 11], "001470": [1, 11], "209232": [1, 11], "show": [1, 2, 8], "consist": [1, 11], "minimum": 1, "mani": [1, 2, 4, 8], "quantati": 1, "variou": [1, 10], "fill": [1, 6, 7, 8], "method": [1, 2, 6, 7, 8, 9, 11], "add": [1, 4, 8, 10, 11], "kinet": [1, 8], "energi": [1, 2, 3, 6, 7, 11], "kinetic_": 1, "mass": [1, 8, 11], "p_ab": [1, 8], "184090": 1, "560141": 1, "291220": 1, "464187": 1, "209237": 1, "notic": 1, "while": [1, 4], "request": [1, 2], "also": [1, 2, 6, 7, 8, 11], "got": 1, "becaus": [1, 4, 6, 7, 9, 11], "anywai": [1, 9], "whether": 1, "alreadi": [1, 4, 6, 7, 9, 11], "present": [1, 2, 8], "befor": [1, 2, 4, 9], "recalcul": [1, 11], "view": 1, "command": 1, "get_method": 1, "absolute_momentum": 1, "beta_and_gamma": 1, "direction_cosin": 1, "relativistic_mass": 1, "rest_mass": [1, 10], "veloc": [1, 8, 11], "access": 1, "ani": [1, 2, 4, 7, 8, 9, 11], "insid": [1, 2, 8], "two": [1, 2, 7, 8, 9], "wai": [1, 2, 9, 11], "specif": [1, 4, 6], "agnost": 1, "cours": [1, 9], "how": [1, 2, 4, 7, 8, 9], "get": [1, 7, 9], "out": [1, 7, 9], "datafram": [1, 2], "6": [1, 2, 4, 6, 7, 8, 9, 11], "without": [1, 4, 11], "refer": 1, "7": [1, 4, 9, 11], "regardless": 1, "situat": [1, 8], "mai": [1, 2, 6, 7, 8, 9], "wish": [1, 9], "remov": [1, 2, 4], "deriv": [1, 2, 8], "do": [1, 2, 4, 6, 9, 11], "minimis": 1, "memori": [1, 2], "footpr": 1, "carri": 1, "oper": [1, 2, 3, 5, 10], "potenti": 1, "invalid": 1, "below": [1, 7, 8, 9, 10, 11], "reset_phase_spac": [1, 2, 9, 11], "8": [1, 4, 9, 11], "perform": [1, 2, 4], "9": [1, 4, 9, 11], "print_energy_stat": [1, 2, 4, 9], "stat": [1, 2, 4, 9], "total": [1, 4, 8, 9], "number": [1, 2, 4, 9, 11], "311489": [1, 4], "uniqu": [1, 4, 8, 9], "speci": [1, 4, 9], "308280": [1, 4, 9], "mean": [1, 4, 7, 9, 11], "91": [1, 4], "median": [1, 4, 9], "20": [1, 4], "spread": [1, 4, 9], "iqr": [1, 4, 9], "03": [1, 4], "min": [1, 2, 4, 9], "max": [1, 2, 4, 9], "35": [1, 4, 9], "2853": [1, 4], "16": [1, 4], "39": [1, 4, 9], "95": [1, 4], "02": [1, 4], "44": [1, 4], "356": [1, 4], "positron": [1, 4, 10], "66": [1, 4], "08": [1, 4], "46": [1, 4], "three": 1, "differ": [1, 3, 5, 6, 7, 8, 9], "gener": [1, 2, 5, 6, 7, 8, 9], "plot": [1, 2, 4, 6, 7, 9, 11], "posit": [1, 2, 3, 8], "energy_hist_1d": [1, 4, 6, 9, 11], "position_hist_1d": [1, 4, 9], "12": [1, 4, 9, 11], "particle_positions_scatter_2d": [1, 7], "beam_direct": [1, 2, 7], "abov": [1, 9, 10, 11], "color": 1, "anoth": 1, "visualis": 1, "plot_beam_intens": 1, "produc": 1, "imag": 1, "accumul": 1, "intens": 1, "13": [1, 4, 9], "particle_positions_hist_2d": [1, 4, 9], "xlim": [1, 4, 9], "ylim": [1, 4, 9], "grid": [1, 2, 4], "true": [1, 2, 4, 7, 9], "actual": [1, 6, 7, 9, 11], "lot": [1, 9], "illumin": 1, "than": [1, 8, 9], "scatter": [1, 4, 7], "wa": [1, 2, 8], "score": 1, "exit": 1, "novel": 1, "rai": 1, "collim": 1, "been": 1, "shape": [1, 6, 7], "squar": 1, "expect": [1, 6, 7], "randomli": [1, 2, 9], "14": 1, "momentum_hist_1d": [1, 4, 9], "n_particles_v_tim": 1, "transverse_trace_space_hist_2d": [1, 4, 9], "transverse_trace_space_scatter_2d": 1, "easili": [1, 8, 11], "electron_p": 1, "pdg": [1, 8], "multipl": 1, "gamma_p": 1, "positron_p": 1, "one": [1, 2, 9, 11], "follow": [1, 2, 4, 6, 7, 8, 10, 11], "where": [1, 2, 4, 6, 7, 8, 9], "17": 1, "no_gamma_p": 1, "togeth": [1, 2, 4], "18": [1, 4, 9], "original_p": 1, "howev": [1, 4, 8, 9, 11], "cannot": [1, 9], "ident": [1, 2, 4], "exist": [1, 2, 6, 7, 8, 9, 11], "realli": [1, 9, 11], "need": [1, 4, 6, 7, 9, 11], "updat": [1, 2, 8, 10, 11], "particle_id": 1, "courant": 1, "snyder": 1, "commonli": 1, "describ": 1, "distribut": [1, 9], "transvers": 1, "save": [1, 2], "print_twiss_paramet": [1, 2, 4, 9], "rm": [1, 2, 4], "epsilon": [1, 4, 9], "525901": [1, 4], "673361": [1, 4], "alpha": [1, 4, 9], "619585": [1, 4], "525727": [1, 4], "976938": [1, 4], "488084": [1, 4], "154160": [1, 4], "134526": [1, 4], "208669": 1, "357446": 1, "159332": 1, "009164": 1, "971102": [1, 4], "634599": [1, 4], "471535": [1, 4], "435510": [1, 4], "881200": [1, 4], "178092": [1, 4], "141023": [1, 4], "283977": 1, "888975": [1, 4], "672388": [1, 4], "591913": [1, 4], "095932": 1, "sometim": [1, 9], "call": [1, 2, 7], "trace": [1, 3], "versu": 1, "diverg": 1, "red": 1, "ellips": [1, 4], "repres": [1, 2, 8, 9, 11], "enclos": 1, "should": [1, 2, 6, 7, 8, 9], "enclod": 1, "37": 1, "beam": [1, 2, 9], "As": [1, 6, 9], "altern": 1, "sum": 1, "21": [1, 2], "plot_twiss_ellips": 1, "fals": [1, 2, 9], "again": [1, 9, 11], "quit": [1, 4, 9], "fairli": [1, 2, 9], "evenli": 1, "dsitribut": 1, "between": [1, 9, 11], "almost": 1, "highli": [1, 4, 11], "intesens": 1, "line": [1, 6, 7], "middl": 1, "og": 1, "log": 1, "scale": 1, "sinc": [1, 4, 6, 7, 9], "research": 1, "purpos": [1, 5, 7, 9], "chang": [1, 3, 9], "simul": [1, 7, 9], "coordin": 1, "system": 1, "veri": [1, 2, 4, 6, 9, 11], "possibl": [1, 9], "your": [1, 6, 7, 9, 11], "own": [1, 9, 11], "risk": 1, "u": 1, "valid": [1, 8, 9], "edit": [1, 11], "underl": 1, "manual": [1, 9, 11], "previous": [1, 4], "reduc": [1, 2, 4, 11], "zero": [1, 6, 7], "doubl": [1, 6, 7], "previou": [1, 9], "re": [1, 2, 4], "desir": [1, 2], "similarli": 1, "stage": 1, "demonstr": [1, 4, 7, 9], "23": [1, 9], "dataexport": [1, 2, 6], "csv_export": [1, 2], "output_loc": [1, 2], "output_nam": [1, 2], "test_export": 1, "lt": [1, 6], "0x2bb9998df40": 1, "gt": [1, 6], "page": [2, 5], "sphinx": 2, "automat": [2, 7, 11], "scan": 2, "sourc": 2, "load_pandasdata": 2, "input_data": 2, "particle_typ": [2, 6, 7], "none": [2, 6, 7, 8], "__unit_config__": [2, 11], "unitset": [2, 11], "object": [2, 3, 8, 9], "load": [2, 6, 7, 9], "format": [2, 5, 6, 7], "intern": [2, 11], "extern": 2, "case": [2, 4, 6, 8, 9], "dedic": 2, "pd": 2, "demo_data": 2, "load_tibaraydata": 2, "ascii": [2, 7], "tibarai": 2, "rxy": 2, "bx": 2, "By": [2, 11], "bz": 2, "g": [2, 8, 9, 11], "nmacro": 2, "rmacro": 2, "data_loc": [2, 6, 7], "tibaray_test": 2, "dat": [2, 6, 7], "read": [2, 3, 5, 6, 7], "both": [2, 7, 9], "binari": 2, "file": [2, 6, 7, 8], "behind": 2, "scene": 2, "reli": 2, "topas2numpi": 2, "load_p2sat_txt": 2, "adapt": 2, "p2sat": [2, 4], "txt": 2, "csv": 2, "um": [2, 11], "hard": [2, 9], "seper": [2, 3], "available_unit": [2, 11], "particlephasespaceunit": [2, 6, 11], "data_url": 2, "http": 2, "raw": 2, "githubusercont": 2, "com": 2, "lesnat": 2, "master": 2, "exampl": [2, 4, 5, 6, 7, 8, 11], "examplephasespac": 2, "file_nam": 2, "p2sat_txt_test": 2, "urlretriev": 2, "p2_sat_uhi": [2, 11], "_particlephasespac": [2, 6, 7, 9], "data_load": 2, "hold": 2, "allow": [2, 5, 6, 9], "user": [2, 7, 9], "utilis": [2, 9], "common": 2, "It": 2, "accept": 2, "paramet": [2, 3, 4, 9], "_dataloadersbas": [2, 6, 7], "assess_density_versus_r": 2, "rval": 2, "verbos": 2, "bool": 2, "str": [2, 6], "assess": 2, "radiu": 2, "linspac": 2, "screen": 2, "option": [2, 8, 9], "main": 2, "direct": 2, "travel": 2, "default": [2, 4, 11], "return": 2, "density_data": 2, "contain": [2, 7], "roi": 2, "val": 2, "proport": 2, "calculate_twiss_paramet": 2, "twiss": [2, 3, 4, 9], "filter_by_boolean_index": [2, 4, 9], "boolean_index": [2, 4, 9], "in_plac": [2, 4, 9], "split": [2, 4, 8, 9], "filter": [2, 9], "input": [2, 4, 6, 7], "boolean": 2, "index": [2, 5], "keep": 2, "discard": [2, 4, 9], "1d": 2, "arrai": 2, "structur": 2, "modifi": 2, "boolan_index": 2, "equal": 2, "filter_by_tim": 2, "t_start": 2, "t_finish": 2, "inclus": 2, "specfi": 2, "float": 2, "particleswith": 2, "new_inst": 2, "get_downsampled_phase_spac": [2, 9], "downsample_factor": 2, "int": 2, "randomlt": 2, "sampl": [2, 3, 5], "larger": [2, 9], "size": [2, 4], "origin": [2, 3, 4], "shuffl": 2, "being": [2, 4], "factor": [2, 8, 11], "downsampl": [2, 3], "merg": [2, 3, 5], "combin": 2, "typic": 2, "regrid": [2, 3, 5], "algorithm": [2, 4], "develop": [2, 4, 7], "leo": 2, "esnault": [2, 4], "retain": 2, "group": 2, "self": [2, 6, 7, 11], "new_p": [2, 4, 9], "summari": 2, "json": 2, "specifi": [2, 6, 7], "thei": [2, 7, 9], "filenam": 2, "directori": 2, "project_particl": 2, "distanc": 2, "each": [2, 4, 8, 11], "project": 2, "forward": [2, 7], "back": [2, 4], "serv": [2, 5, 9], "crude": 2, "advanc": 2, "transport": 2, "up": [2, 3, 5], "absenc": 2, "forc": 2, "far": 2, "its": 2, "quantiti": [2, 3, 4, 8, 9, 11], "n_bin": [2, 4], "onto": 2, "good": [2, 6, 9], "close": [2, 4, 9], "50": 2, "anyth": 2, "column": [2, 3, 5, 6, 7, 11], "bin": [2, 4], "rebin": 2, "singl": [2, 4], "appli": [2, 9], "integ": [2, 8], "per": [2, 8], "resample_via_gaussian_kd": [2, 9], "n_new_particles_factor": [2, 9], "interpolate_weight": [2, 9], "base": [2, 4, 9], "fit": [2, 9], "gaussian": [2, 3, 5], "kernel": [2, 9], "densiti": [2, 9], "estim": [2, 9], "d": [2, 4], "set": [2, 3, 4, 6, 8, 9], "attempt": [2, 6, 8], "interpol": 2, "within": 2, "7d": 2, "experiment": [2, 9], "extrem": [2, 9], "caution": [2, 9], "len": [2, 6, 7, 9], "word": 2, "_ps_data": 2, "requir": [2, 3, 5, 6, 7, 9, 11], "delet": 2, "whenev": [2, 9, 11], "footprint": 2, "set_unit": [2, 11], "new_unit": 2, "reset": [2, 3, 11], "sort": 2, "quantities_to_sort": 2, "accord": 2, "order": [2, 8], "place": 2, "phasespaceinst": 2, "particular": 2, "text": [2, 7], "topas_export": 2, "output": [2, 9], "featur": [2, 6, 7], "everi": [2, 11], "flag": 2, "histori": 2, "data": [3, 4, 5, 8], "addit": [3, 7], "phase": [3, 5, 6, 7], "space": [3, 5, 6, 7], "analyt": 3, "ad": [3, 4, 5], "subtract": 3, "manipul": [3, 5], "export": [3, 5, 7], "loader": [3, 5, 6], "after": [3, 4], "compress": [3, 5], "via": [3, 5], "conclus": 3, "down": [3, 5], "kde": [3, 5], "larg": [3, 4], "hoc": 3, "clean": 3, "compar": [3, 11], "A": [4, 9], "simpl": [4, 10], "mechan": 4, "practic": 4, "doesn": [4, 9], "tend": 4, "even": 4, "few": [4, 9], "truli": 4, "tutori": [4, 9], "explot": 4, "fact": 4, "effect": 4, "nudg": 4, "l\u00e3": 4, "o": 4, "matplotlib": [4, 9], "pyplot": [4, 9], "plt": [4, 9], "vast": 4, "major": 4, "go": [4, 7, 9], "outsid": [4, 9], "rang": [4, 9], "come": [4, 11], "later": [4, 11], "keep_ind": [4, 9], "logical_and": [4, 9], "keep_ind2": 4, "keep_ind3": 4, "ps_discard": [4, 9], "account": [4, 9], "89": 4, "ok": [4, 7, 9], "about": [4, 9, 11], "try": [4, 9], "279094": 4, "took": 4, "henc": 4, "157174": 4, "56": 4, "done": 4, "quantitiu": 4, "result": 4, "roughli": 4, "33": 4, "extract": 4, "obviou": 4, "question": 4, "154315": 4, "151106": 4, "09": 4, "40": 4, "208670": 4, "357445": 4, "159331": 4, "009165": 4, "283976": 4, "095931": 4, "690392": 4, "014616": 4, "443078": 4, "366593": 4, "144493": 4, "318489": 4, "194698": 4, "179535": 4, "211982": 4, "360174": 4, "157147": 4, "008641": 4, "963498": 4, "630658": 4, "471238": 4, "435652": 4, "885795": 4, "179988": 4, "139382": 4, "280596": 4, "882121": 4, "668230": 4, "591994": 4, "094013": 4, "includ": [4, 7], "process": [4, 6], "did": 4, "could": [4, 9], "stack": 4, "around": 4, "edg": 4, "most": 4, "strongli": 4, "affect": 4, "appear": [4, 9], "approach": [4, 9], "lose": 4, "too": [4, 9], "inform": 4, "extent": 4, "appropri": 4, "applic": [4, 9], "aim": 5, "python": [5, 9], "analys": 5, "support": 5, "document": [5, 8, 9, 10], "modul": 5, "search": 5, "similar": 6, "sai": 6, "match": [6, 9, 11], "those": [6, 9], "mm_mev": [6, 11], "To": [6, 8], "creat": [6, 11], "_dataexportersbas": 6, "__particle_config__": [6, 7, 10], "particle_cfg": [6, 7], "newdataexport": 6, "def": [6, 7], "_define_required_column": 6, "_export_data": 6, "_set_expected_unit": 6, "job": [6, 7], "blank": 6, "must": [6, 7, 8, 11], "These": [6, 8, 9], "name": [6, 7, 8, 9, 10, 11], "set_expected_unit": 6, "receiv": [6, 7], "correct": [6, 7, 11], "happen": [6, 9], "hand": 6, "_required_column": 6, "_expected_unit": 6, "_output_nam": 6, "suffix": [6, 7], "els": 6, "writefilepath": 6, "_output_loc": 6, "header": [6, 7], "ty": [6, 7], "tz": [6, 7], "tpx": [6, 7], "tpy": [6, 7], "tpz": [6, 7], "te": [6, 7], "_p": 6, "to_numpi": 6, "transpos": 6, "formatspec": 6, "5f": 6, "savetxt": 6, "fmt": 6, "delimit": 6, "comment": 6, "ps_electron": 6, "test_new_export": 6, "__main__": 6, "0x26234e6f0d0": 6, "verifi": 6, "recycl": 6, "__": [6, 7], "wrote": 6, "newdataload": [6, 7], "_import_data": [6, 7], "loadtxt": [6, 7], "_input_data": [6, 7], "skiprow": [6, 7], "particle_properti": [6, 7, 10], "_particle_typ": [6, 7], "ones": [6, 7, 8], "arang": [6, 7], "replac": [6, 7], "convers": [6, 7, 11], "consisten": [6, 7], "_check_energy_consist": [6, 7], "_check_input_data": [6, 7], "is_fil": [6, 7], "rais": [6, 7], "filenotfounderror": [6, 7], "doe": [6, 7, 11], "right": [6, 7], "extens": [6, 7], "except": [6, 7], "open": [6, 7], "first_lin": [6, 7], "readlin": [6, 7], "One": 7, "easi": [7, 11], "inhereit": 7, "_dataimportersbas": 7, "provid": 7, "whatev": 7, "suppli": 7, "etc": [7, 8], "pre": [7, 11], "error": 7, "__import_data": 7, "fundament": [7, 8, 9], "popul": 7, "attribut": 7, "succesfulli": 7, "guarante": [7, 9], "am": [7, 9], "colleagu": 7, "encod": [7, 8], "pretti": [7, 9], "straight": 7, "enter": 7, "complet": [7, 9, 11], "_column": 7, "new_data_loader_demo": 7, "weight_position_plot": 7, "slow": 7, "__phase_space_config": 8, "categori": 8, "impli": [8, 9], "core": 8, "fill_kinetic_": 8, "free": 8, "allowed_column": 8, "associ": 8, "test_all_allowed_columns_can_be_fil": 8, "test_particlephasespac": 8, "descript": 8, "relativist": 8, "statist": 8, "record": 8, "fill_rest_mass": 8, "fill_absolute_momentum": 8, "fill_relativistic_mass": 8, "beta_x": 8, "beta_i": 8, "beta_z": 8, "beta_ab": 8, "fill_beta_and_gamma": 8, "lorentz": 8, "vx": 8, "vy": 8, "vz": 8, "fill_veloc": 8, "fill_direction_cosin": 8, "sever": 8, "rather": 8, "live": 8, "notebook": 8, "them": [8, 9], "hopefulli": 8, "trivial": 8, "help": 8, "properti": 8, "math": 8, "someth": 8, "p_x": 8, "directioncosine_x": 8, "rest_energi": 8, "511": [8, 10], "form": [8, 11], "somewhat": 8, "unusu": 8, "p_ev_c": 8, "p_si": 8, "p_mev_c": 8, "1e": [8, 11], "othertim": 9, "qualiti": 9, "mont": 9, "carlo": 9, "independ": 9, "primari": 9, "expens": 9, "task": 9, "solv": 9, "issu": 9, "further": 9, "warn": 9, "heurist": 9, "undertak": 9, "care": [9, 11], "comparison": 9, "intend": 9, "dens": 9, "argu": 9, "don": [9, 11], "my": 9, "properli": 9, "probabl": 9, "Of": 9, "preserv": [9, 11], "sophist": 9, "function": 9, "challen": 9, "problem": 9, "seven": 9, "dimens": 9, "correl": 9, "popular": 9, "choic": 9, "sensit": 9, "tail": 9, "prone": 9, "long": [9, 11], "idea": 9, "nearli": 9, "li": 9, "filter_input_data": 9, "spatial_cutoff": 9, "86": 9, "principl": 9, "model": 9, "littl": 9, "entri": 9, "1306": 9, "userwarn": 9, "old": 9, "ensur": [9, 11], "enough": 9, "265149": 9, "132574": 9, "implement": 9, "improv": 9, "turn": 9, "off": 9, "aren": 9, "Such": 9, "fashion": 9, "leav": 9, "individu": 9, "neg": 9, "big": 9, "chunk": 9, "partilc": 9, "histogram": 9, "although": 9, "haven": 9, "shown": 9, "well": 9, "reflect_pz": 9, "closer": 9, "recomend": 9, "bit": 9, "disast": 9, "outlier": 9, "caus": 9, "higher": 9, "maximum": 9, "remove_high_divergence_particl": 9, "div_x": 9, "div_i": 9, "max_div_x": 9, "max_div_i": 9, "rem_ind": 9, "logical_or": 9, "logical_not": 9, "089075": 9, "089526": 9, "568640": 9, "563796": 9, "168591": 9, "133908": 9, "214531": 9, "214849": 9, "203380": 9, "181925": 9, "268129": 9, "281228": 9, "988033": 9, "323960": 9, "358729": 9, "324640": 9, "emitt": 9, "perfectli": 9, "terribl": 9, "anymor": 9, "either": [9, 10], "mang": 9, "131561": 9, "41": 9, "26": 9, "reason": 9, "guess": 9, "excercis": 9, "fail": 9, "badli": 9, "upsampl": 9, "mention": 9, "consid": 9, "accuraci": 9, "specfic": 9, "602": 10, "proton": 10, "2212": 10, "938": 10, "272": 10, "neutron": 10, "2112": 10, "939": 10, "565": 10, "dictionari": 10, "some_new_particl": 10, "rest_mass_in_mev": 10, "charge_in_coulomb": 10, "definit": [10, 11], "alia": 10, "enabl": 10, "part": 10, "pdg_code_new_particl": 10, "varieti": 11, "convent": 11, "There": 11, "program": 11, "cm_mev": 11, "length": 11, "cm": 11, "m_ev": 11, "um_kev": 11, "kev": 11, "pick": 11, "my_unit": 11, "equivalal": 11, "unti": 11, "different_unit": 11, "get_unit": 11, "971": 11, "176758": 11, "817": 11, "280090": 11, "396000": 11, "855738": 11, "508804": 11, "3184": 11, "060481": 11, "916": 11, "197754": 11, "839": 11, "297668": 11, "894435": 11, "249210": 11, "1560": 11, "114059": 11, "5258": 11, "901367": 11, "11318": 11, "419922": 11, "193": 11, "061367": 11, "377": 11, "103855": 11, "1219": 11, "741850": 11, "15326": 11, "970703": 11, "25628": 11, "898438": 11, "102": 11, "888760": 11, "362": 11, "594239": 11, "1414": 11, "843426": 11, "241": 11, "947769": 11, "401": 11, "025604": 11, "191501": 11, "469658": 11, "209": 11, "231939": 11, "graph": 11, "automatical": 11, "advis": 11, "__init__": 11, "copi": 11, "unit_set": 11, "subject": 11, "dimensionless": 11, "prefer": 11, "_unit": 11, "cm_kev": 11, "length_unit": 11, "energy_unit": 11, "1e3": 11, "momentum_unit": 11, "time_unit": 11, "mass_unit": 11, "velocity_unit": 11, "kmph": 11, "mainli": 11, "compris": 11, "explanatori": 11, "THe": 11, "converion": 11, "value_in_mm": 11, "value_in_cm": 11, "cm_convers": 11, "Be": 11, "defint": 11, "substantiali": 11}, "objects": {"ParticlePhaseSpace": [[2, 0, 0, "-", "DataExporters"], [2, 0, 0, "-", "DataLoaders"], [2, 0, 0, "-", "_ParticlePhaseSpace"]], "ParticlePhaseSpace.DataExporters": [[2, 1, 1, "", "CSV_Exporter"], [2, 1, 1, "", "Topas_Exporter"]], "ParticlePhaseSpace.DataLoaders": [[2, 1, 1, "", "Load_PandasData"], [2, 1, 1, "", "Load_TibarayData"], [2, 1, 1, "", "Load_TopasData"], [2, 1, 1, "", "Load_p2sat_txt"]], "ParticlePhaseSpace._ParticlePhaseSpace": [[2, 1, 1, "", "PhaseSpace"]], "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace": [[2, 2, 1, "", "assess_density_versus_r"], [2, 2, 1, "", "calculate_twiss_parameters"], [2, 2, 1, "", "filter_by_boolean_index"], [2, 2, 1, "", "filter_by_time"], [2, 2, 1, "", "get_downsampled_phase_space"], [2, 2, 1, "", "merge"], [2, 2, 1, "", "print_energy_stats"], [2, 2, 1, "", "print_twiss_parameters"], [2, 2, 1, "", "project_particles"], [2, 2, 1, "", "regrid"], [2, 2, 1, "", "resample_via_gaussian_kde"], [2, 2, 1, "", "reset_phase_space"], [2, 2, 1, "", "set_units"], [2, 2, 1, "", "sort"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"]}, "titleterms": {"express": 0, "bend": 0, "radiu": 0, "kinet": 0, "energi": [0, 4, 8, 9], "basic": 1, "exampl": [1, 3, 9], "data": [1, 2, 6, 7, 9, 11], "import": 1, "calcul": 1, "addit": 1, "quantiti": 1, "reset": 1, "phase": [1, 2, 4, 8, 9], "space": [1, 2, 4, 8, 9], "requir": [1, 8], "column": [1, 8], "analyt": 1, "seper": 1, "ad": [1, 9, 10], "subtract": 1, "object": 1, "twiss": 1, "paramet": 1, "manipul": 1, "export": [1, 2, 6], "code": 2, "document": 2, "loader": [2, 7], "particl": [2, 4, 9, 10], "compress": 4, "via": 4, "regrid": 4, "merg": 4, "oper": 4, "posit": [4, 9], "momentum": [4, 8, 9], "trace": 4, "note": 4, "conclus": 4, "particlephasespac": 5, "content": 5, "indic": 5, "tabl": 5, "write": [6, 7], "new": [6, 7, 10, 11], "test": 6, "format": 8, "allow": 8, "unit": [8, 11], "read": [8, 11], "If": 8, "direct": 8, "cosin": 8, "ar": 8, "specifi": 8, "beta": 8, "gamma": 8, "i": 8, "si": 8, "up": 9, "down": 9, "sampl": 9, "us": 9, "gaussian": 9, "kde": 9, "downsampl": 9, "larg": 9, "clean": 9, "input": 9, "hoc": 9, "step": 9, "reflect": 9, "pz": 9, "remov": 9, "high": 9, "diverg": 9, "compar": 9, "origin": 9, "support": 10, "work": 11, "differ": 11, "avail": 11, "set": 11, "chang": 11, "after": 11, "defin": 11}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "nbsphinx": 4, "sphinx": 57}, "alltitles": {"Express bending radius in kinetic energy": [[0, "express-bending-radius-in-kinetic-energy"]], "Basic Example": [[1, "Basic-Example"]], "Data import": [[1, "Data-import"]], "Calculation of additional quantities": [[1, "Calculation-of-additional-quantities"]], "Reset the phase space to required columns": [[1, "Reset-the-phase-space-to-required-columns"]], "Basic analytics": [[1, "Basic-analytics"]], "Seperating, adding, and subtracting phase space objects": [[1, "Seperating,-adding,-and-subtracting-phase-space-objects"]], "Twiss parameters": [[1, "Twiss-parameters"]], "Manipulating data in the phase space": [[1, "Manipulating-data-in-the-phase-space"]], "Exporting the data": [[1, "Exporting-the-data"]], "Code Documentation": [[2, "code-documentation"]], "Data Loaders": [[2, "module-ParticlePhaseSpace.DataLoaders"]], "Particle Phase Space": [[2, "module-ParticlePhaseSpace._ParticlePhaseSpace"]], "Data Exporters": [[2, "module-ParticlePhaseSpace.DataExporters"]], "Examples": [[3, "examples"]], "Examples:": [[3, null]], "Compress phase space via regrid/merge operations": [[4, "Compress-phase-space-via-regrid/merge-operations"]], "Particle Positions": [[4, "Particle-Positions"], [9, "Particle-Positions"]], "Energy": [[4, "Energy"], [9, "Energy"]], "Momentum": [[4, "Momentum"], [9, "Momentum"]], "Trace Space": [[4, "Trace-Space"]], "Notes/ Conclusions": [[4, "Notes/-Conclusions"]], "ParticlePhaseSpace": [[5, "particlephasespace"]], "Contents:": [[5, null]], "Indices and tables": [[5, "indices-and-tables"]], "Writing a new data exporter": [[6, "Writing-a-new-data-exporter"]], "Testing the data export": [[6, "Testing-the-data-export"]], "Writing a new data loader": [[7, "Writing-a-new-data-loader"]], "Phase Space Format": [[8, "phase-space-format"]], "Required Columns": [[8, "required-columns"]], "Allowed Columns": [[8, "allowed-columns"]], "Units": [[8, "units"]], "Reading in momentum": [[8, "reading-in-momentum"]], "If energy/ direction cosines are specified:": [[8, "if-energy-direction-cosines-are-specified"]], "If beta/ gamma specified": [[8, "if-beta-gamma-specified"]], "If momentum is specified in SI units": [[8, "if-momentum-is-specified-in-si-units"]], "Up/Down sampling phase space data using gaussian KDE": [[9, "Up/Down-sampling-phase-space-data-using-gaussian-KDE"]], "Example: Downsampling a large phase space": [[9, "Example:-Downsampling-a-large-phase-space"]], "Clean input data": [[9, "Clean-input-data"]], "Ad-hoc data cleaning steps": [[9, "Ad-hoc-data-cleaning-steps"]], "Reflect Pz": [[9, "Reflect-Pz"]], "Remove high divergence particles": [[9, "Remove-high-divergence-particles"]], "Compare original to downsampled:": [[9, "Compare-original-to-downsampled:"]], "Supported particles": [[10, "supported-particles"]], "Adding new particles": [[10, "adding-new-particles"]], "Working with different units": [[11, "Working-with-different-units"]], "Available units": [[11, "Available-units"]], "Setting units at data read in": [[11, "Setting-units-at-data-read-in"]], "Changing units after read in": [[11, "Changing-units-after-read-in"]], "Defining new unit sets": [[11, "Defining-new-unit-sets"]]}, "indexentries": {"csv_exporter (class in particlephasespace.dataexporters)": [[2, "ParticlePhaseSpace.DataExporters.CSV_Exporter"]], "load_pandasdata (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_PandasData"]], "load_tibaraydata (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_TibarayData"]], "load_topasdata (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_TopasData"]], "load_p2sat_txt (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_p2sat_txt"]], "particlephasespace.dataexporters": [[2, "module-ParticlePhaseSpace.DataExporters"]], "particlephasespace.dataloaders": [[2, "module-ParticlePhaseSpace.DataLoaders"]], "particlephasespace._particlephasespace": [[2, "module-ParticlePhaseSpace._ParticlePhaseSpace"]], "phasespace (class in particlephasespace._particlephasespace)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace"]], "topas_exporter (class in particlephasespace.dataexporters)": [[2, "ParticlePhaseSpace.DataExporters.Topas_Exporter"]], "assess_density_versus_r() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.assess_density_versus_r"]], "calculate_twiss_parameters() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.calculate_twiss_parameters"]], "filter_by_boolean_index() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.filter_by_boolean_index"]], "filter_by_time() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.filter_by_time"]], "get_downsampled_phase_space() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.get_downsampled_phase_space"]], "merge() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.merge"]], "module": [[2, "module-ParticlePhaseSpace.DataExporters"], [2, "module-ParticlePhaseSpace.DataLoaders"], [2, "module-ParticlePhaseSpace._ParticlePhaseSpace"]], "print_energy_stats() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.print_energy_stats"]], "print_twiss_parameters() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.print_twiss_parameters"]], "project_particles() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.project_particles"]], "regrid() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.regrid"]], "resample_via_gaussian_kde() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.resample_via_gaussian_kde"]], "reset_phase_space() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.reset_phase_space"]], "set_units() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.set_units"]], "sort() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.sort"]]}})