Search.setIndex({"docnames": ["BendingRadius", "basic_example", "code_docs", "examples", "index", "new_data_exporter", "new_data_loader", "phase_space_format", "resampling_via_gaussian_kde", "supported_particles", "units"], "filenames": ["BendingRadius.md", "basic_example.ipynb", "code_docs.rst", "examples.rst", "index.rst", "new_data_exporter.ipynb", "new_data_loader.ipynb", "phase_space_format.md", "resampling_via_gaussian_kde.ipynb", "supported_particles.md", "units.ipynb"], "titles": ["Express bending radius in kinetic energy", "Basic Example", "Code Documentation", "Examples", "ParticlePhaseSpace", "Writing a new data exporter", "Writing a new data loader", "Phase Space Format", "Up/Down sampling phase space data using gaussian KDE", "Supported particles", "Working with different units"], "terms": {"The": [0, 1, 2, 5, 6, 7, 8, 9, 10], "particl": [0, 1, 4, 5, 6, 7, 10], "magnet": 0, "field": [0, 1, 2], "i": [0, 1, 2, 5, 6, 8, 9, 10], "given": [0, 1, 2, 10], "begin": 0, "equat": 0, "label": [0, 10], "eqn": 0, "1": [0, 1, 2, 5, 6, 7, 8, 9, 10], "tag": [0, 10], "r": [0, 1, 2, 6, 8, 10], "frac": 0, "p": [0, 1, 2, 5, 6, 7, 8, 10], "qb": 0, "gamma": [0, 1, 2, 8, 9], "m_0": 0, "v": [0, 2], "beta": [0, 1, 2, 8], "c": [0, 1, 2, 5, 6, 7, 8, 9, 10], "end": [0, 2], "meanwhil": [0, 1], "relatavist": [0, 2], "e_k": [0, 7], "mc": 0, "2": [0, 1, 2, 5, 6, 7, 8, 9, 10], "m_0c": 0, "sqrt": [0, 7], "our": [0, 2, 5, 6, 8], "goal": [0, 6], "term": [0, 7], "firstli": 0, "we": [0, 1, 2, 5, 6, 7, 8, 10], "can": [0, 1, 2, 5, 6, 7, 8, 10], "us": [0, 1, 2, 3, 4, 5, 6, 7, 9, 10], "momentum": [0, 1, 2, 3, 4, 5, 6, 10], "relat": [0, 2], "e": [0, 2, 5, 6, 7, 8, 10], "2c": 0, "4": [0, 1, 5, 6, 8, 10], "ek": [0, 1, 5, 6, 7], "e0": 0, "e_0": [0, 7], "2e_k": 0, "now": [0, 1, 6, 8, 10], "assum": [0, 8], "ev": [0, 7, 10], "have": [0, 1, 2, 5, 6, 7, 8, 10], "just": [0, 1, 2, 5, 6, 8, 10], "calcul": [0, 2, 3, 7], "unit": [0, 2, 3, 4, 5, 6], "thi": [0, 1, 2, 4, 5, 6, 7, 8, 9, 10], "directli": [0, 1, 8], "would": [0, 2, 5, 6, 7, 8, 10], "convert": [0, 2, 5, 7, 10], "si": 0, "kg": [0, 7, 10], "m": [0, 2, 7, 10], "": [0, 1, 2, 5, 7, 8, 10], "p_": 0, "q": [0, 2, 7], "substitut": 0, "bc": 0, "note": [0, 1, 2, 5, 6, 7, 8, 10], "formula": 0, "electron": [0, 1, 2, 5, 6, 7, 9], "volt": 0, "rearrang": 0, "slightli": 0, "At": [0, 2], "point": [0, 2], "ar": [0, 1, 2, 5, 6, 8, 9, 10], "still": [0, 8], "defin": [0, 1, 2, 3, 7], "If": [0, 1, 2, 5, 6, 10], "instead": [0, 2, 10], "joul": 0, "bcq": 0, "which": [0, 1, 2, 6, 8, 10], "same": [0, 1, 2, 5], "magdalena": 0, "answer": 0, "let": [0, 1, 5, 6, 8, 10], "check": [0, 1, 5, 6, 8], "all": [0, 1, 2, 5, 6, 7, 8, 10], "make": [0, 1, 6, 7], "sens": [0, 1], "some": [0, 1, 5, 6, 7, 8, 10], "basic": [0, 2, 3, 4, 6], "import": [0, 2, 3, 4, 5, 6, 7, 8, 10], "numpi": [0, 5, 6, 8], "np": [0, 2, 5, 6, 8], "from": [0, 1, 2, 5, 6, 7, 8, 10], "scipi": 0, "constant": 0, "elementary_charg": 0, "b": [0, 8], "t": [0, 1, 2, 8, 10], "10e6": 0, "ek_si": 0, "j": 0, "0": [0, 1, 2, 5, 6, 7, 8, 9, 10], "511e6": 0, "e0_si": 0, "first": [0, 1, 2, 5, 6, 8, 10], "version": 0, "r_brendan": 0, "r_magdalena": 0, "print": [0, 2, 8, 10], "f": [0, 2, 5, 6, 8], "n": [0, 5, 6, 10], "nbend": 0, "nenergi": 0, "1e6": 0, "2f": 0, "mev": [0, 1, 2, 5, 6, 7, 8, 9, 10], "ncharg": 0, "2e": 0, "nin": 0, "ni": 0, "brendan": [0, 8], "3f": 0, "10": [0, 1, 2, 8, 10], "00": [0, 8], "charg": [0, 7, 9], "60e": 0, "19": [0, 1, 9], "In": [0, 1, 2, 6, 7, 8, 10], "018": 0, "onli": [0, 1, 2, 5, 7, 8, 10], "other": [0, 1, 2, 7, 10], "thing": 0, "worth": 0, "here": [0, 1, 2, 7], "light": 0, "ratio": 0, "rest": [0, 1, 2, 7], "becom": 0, "small": [0, 8], "high": 0, "second": [0, 8], "ha": [0, 2, 6, 8], "valu": [0, 1, 2, 5, 6, 7, 8, 10], "so": [0, 1, 6, 8, 9, 10], "ignor": 0, "write": [0, 1, 2, 3, 4, 7], "much": [0, 8], "more": [0, 1, 2, 8], "simpli": [0, 10], "approx": 0, "r_approxim": 0, "approxim": [0, 2], "nwhich": 0, "wrong": 0, "100": [0, 2], "ab": [0, 8], "017": 0, "75": 0, "step": [1, 3, 10], "analysi": [1, 2, 8], "code": [1, 4, 6, 7, 9, 10], "alwai": [1, 2, 7, 8], "handl": [1, 2, 6, 8], "through": 1, "an": [1, 2, 5, 6, 7, 8, 9], "instanc": [1, 2, 6, 7, 10], "dataload": [1, 2, 5, 6, 7, 8, 10], "class": [1, 2, 5, 6], "work": [1, 3, 4, 5, 6, 7], "topa": [1, 2, 5], "For": [1, 6, 7, 8, 10], "list": [1, 2, 5, 10], "current": [1, 8, 9, 10], "avail": [1, 3, 5, 6, 7], "see": [1, 7, 8], "instruct": 1, "new": [1, 2, 3, 4, 7, 8], "pathlib": [1, 2, 5, 6, 8, 10], "path": [1, 2, 5, 6, 8, 10], "sy": [1, 5, 6, 8, 10], "append": [1, 5, 6, 8, 10], "necessari": [1, 8, 10], "when": [1, 2, 8, 10], "librari": [1, 2, 4, 6, 8, 10], "instal": [1, 6, 8, 10], "particlephasespac": [1, 2, 5, 6, 8, 9, 10], "phasespac": [1, 2, 5, 6, 7, 8, 10], "test_data_loc": [1, 8, 10], "test": [1, 2, 3, 6, 7, 8, 9, 10], "test_data": [1, 2, 5, 6, 8, 10], "coll_phasespace_xang_0": [1, 2, 5, 8, 10], "00_yang_0": [1, 2, 5, 8, 10], "00_angular_error_0": [1, 2, 5, 8, 10], "phsp": [1, 2, 5, 8, 10], "absolut": [1, 2, 6, 8, 10], "ps_data": [1, 2, 5, 8, 10], "load_topasdata": [1, 2, 5, 8, 10], "onc": 1, "pass": [1, 5, 6, 7, 9, 10], "underli": [1, 2], "store": [1, 6], "panda": [1, 2], "frame": [1, 6], "you": [1, 2, 5, 6, 7, 8, 10], "shouldn": 1, "often": [1, 8], "want": [1, 2, 5, 6, 7, 10], "interact": [1, 2, 8], "take": [1, 8], "quick": 1, "look": [1, 5, 6, 8, 10], "know": [1, 8], "what": [1, 6, 7, 8, 10], "like": [1, 2, 5, 6, 7, 8, 10], "3": [1, 5, 6, 8, 10], "head": [1, 10], "type": [1, 2, 5, 6, 7, 10], "pdg_code": [1, 2, 5, 7, 9, 10], "x": [1, 2, 5, 6, 7, 8, 10], "mm": [1, 2, 5, 6, 7, 8, 10], "y": [1, 2, 5, 6, 7, 8, 10], "z": [1, 2, 5, 6, 7, 8, 10], "weight": [1, 2, 5, 6, 7, 8, 10], "id": [1, 2, 5, 6, 7, 10], "time": [1, 2, 5, 6, 7, 8, 10], "px": [1, 2, 5, 6, 7, 8, 10], "py": [1, 2, 5, 6, 7, 8, 9, 10], "pz": [1, 2, 5, 6, 7, 10], "22": [1, 9, 10], "971177": [1, 10], "817280": [1, 10], "396": [1, 10], "01": [1, 8, 10], "008856": [1, 10], "010509": [1, 10], "184060": [1, 10], "916198": [1, 10], "839298": [1, 10], "003894": [1, 10], "008249": [1, 10], "560114": [1, 10], "5": [1, 2, 5, 6, 8, 10], "258902": [1, 10], "11": [1, 2, 5, 8, 9, 10], "318420": [1, 10], "193061": [1, 10], "377104": [1, 10], "219742": [1, 10], "15": [1, 10], "326971": [1, 10], "25": [1, 10], "628899": [1, 10], "102889": [1, 10], "362594": [1, 10], "414843": [1, 10], "241948": [1, 10], "401026": [1, 10], "000192": [1, 10], "001470": [1, 10], "209232": [1, 10], "show": [1, 2, 7], "consist": [1, 10], "minimum": [1, 2], "mani": [1, 2, 7], "quantati": 1, "variou": [1, 9], "fill": [1, 5, 6, 7], "method": [1, 2, 5, 6, 7, 8, 10], "add": [1, 2, 7, 9, 10], "kinet": [1, 2, 7], "energi": [1, 2, 5, 6, 10], "fill_kinetic_": [1, 2, 7], "mass": [1, 2, 7, 10], "p_ab": [1, 7], "184090": 1, "560141": 1, "291220": 1, "464187": 1, "209237": 1, "notic": 1, "while": 1, "request": [1, 2], "also": [1, 2, 5, 6, 7, 10], "got": 1, "becaus": [1, 5, 6, 8, 10], "anywai": [1, 8], "whether": 1, "alreadi": [1, 5, 6, 8, 10], "present": [1, 2, 7], "befor": [1, 2, 8], "recalcul": [1, 10], "situat": [1, 7], "mai": [1, 2, 5, 6, 7, 8], "wish": [1, 8], "remov": [1, 2], "deriv": [1, 2, 7], "do": [1, 2, 5, 8, 10], "minimis": 1, "memori": [1, 2], "footpr": 1, "carri": 1, "out": [1, 2, 6, 8], "oper": [1, 2, 9], "potenti": 1, "invalid": 1, "below": [1, 6, 7, 8, 9, 10], "reset_phase_spac": [1, 2, 8, 10], "perform": [1, 2], "6": [1, 2, 5, 6, 7, 8, 10], "print_energy_stat": [1, 2, 8], "stat": [1, 2, 8], "total": [1, 7, 8], "number": [1, 2, 8, 10], "311489": 1, "uniqu": [1, 2, 7, 8], "speci": [1, 2, 8], "308280": [1, 8], "mean": [1, 6, 8, 10], "91": 1, "median": [1, 8], "20": 1, "spread": [1, 8], "iqr": [1, 8], "03": 1, "min": [1, 2, 8], "max": [1, 2, 8], "35": [1, 8], "2853": 1, "16": 1, "39": [1, 8], "95": 1, "02": 1, "9": [1, 8, 10], "44": 1, "356": 1, "positron": [1, 9], "66": 1, "08": 1, "8": [1, 8, 10], "46": 1, "three": 1, "differ": [1, 2, 3, 4, 5, 6, 7, 8], "gener": [1, 2, 4, 5, 6, 7, 8], "plot": [1, 2, 6, 8], "posit": [1, 2, 7], "7": [1, 8, 10], "plot_energy_hist_1d": [1, 2, 5, 8, 10], "plot_position_hist_1d": [1, 2, 8], "plot_particle_positions_scatter_2d": [1, 2, 6], "beam_direct": [1, 2, 6], "abov": [1, 8, 9, 10], "color": [1, 2], "anoth": 1, "wai": [1, 2, 8, 10], "visualis": 1, "plot_beam_intens": 1, "produc": [1, 2], "imag": 1, "accumul": [1, 2], "intens": [1, 2], "plot_particle_positions_hist_2d": [1, 2, 8], "xlim": [1, 2, 8], "ylim": [1, 2, 8], "grid": [1, 2], "true": [1, 2, 6, 8], "actual": [1, 5, 6, 8, 10], "lot": [1, 8], "illumin": 1, "than": [1, 7, 8], "scatter": [1, 2, 6], "wa": [1, 2, 7], "score": 1, "exit": 1, "novel": 1, "rai": 1, "collim": 1, "been": 1, "shape": [1, 5, 6], "squar": 1, "expect": [1, 5, 6], "randomli": [1, 2, 8], "easili": [1, 7, 10], "electron_p": 1, "pdg": [1, 7], "get": [1, 6, 8], "multipl": 1, "12": [1, 8, 10], "gamma_p": 1, "positron_p": 1, "one": [1, 2, 8, 10], "follow": [1, 2, 5, 6, 7, 9, 10], "where": [1, 2, 5, 6, 7, 8], "13": [1, 8], "no_gamma_p": 1, "togeth": [1, 2], "14": 1, "original_p": 1, "howev": [1, 7, 8, 10], "cannot": [1, 8], "ident": [1, 2], "exist": [1, 2, 5, 6, 7, 8, 10], "realli": [1, 8, 10], "need": [1, 5, 6, 8, 10], "updat": [1, 2, 7, 9, 10], "particle_id": 1, "courant": 1, "snyder": 1, "commonli": 1, "describ": 1, "distribut": [1, 8], "transvers": 1, "save": [1, 2], "print_twiss_paramet": [1, 2, 8], "rm": [1, 2], "epsilon": [1, 8], "525901": 1, "673361": 1, "alpha": [1, 2, 8], "619585": 1, "525727": 1, "976938": 1, "488084": 1, "154160": 1, "134526": 1, "208669": 1, "357446": 1, "159332": 1, "009164": 1, "971102": 1, "634599": 1, "471535": 1, "435510": 1, "881200": 1, "178092": 1, "141023": 1, "283977": 1, "888975": 1, "672388": 1, "591913": 1, "095932": 1, "plot_transverse_trace_space_scatter_2d": [1, 2], "sometim": [1, 8], "call": [1, 2, 6], "trace": [1, 2], "versu": [1, 2], "diverg": 1, "red": 1, "ellips": [1, 2], "repres": [1, 2, 7, 8, 10], "enclos": 1, "should": [1, 2, 5, 6, 7, 8], "enclod": 1, "37": 1, "beam": [1, 2, 8], "As": [1, 5, 8], "altern": 1, "sum": 1, "17": 1, "plot_transverse_trace_space_hist_2d": [1, 2, 8], "plot_twiss_ellips": [1, 2], "fals": [1, 2, 8], "again": [1, 8, 10], "quit": [1, 8], "fairli": [1, 2, 8], "evenli": 1, "dsitribut": 1, "between": [1, 8, 10], "almost": 1, "highli": [1, 10], "intesens": 1, "line": [1, 5, 6], "middl": 1, "og": 1, "log": [1, 2], "scale": [1, 2], "sinc": [1, 5, 6, 8], "research": 1, "purpos": [1, 4, 6, 8], "chang": [1, 3, 8], "simul": [1, 6, 8], "coordin": 1, "system": 1, "veri": [1, 2, 5, 8, 10], "possibl": [1, 8], "your": [1, 5, 6, 8, 10], "own": [1, 8, 10], "risk": 1, "u": [1, 2], "valid": [1, 7, 8], "ani": [1, 2, 6, 7, 8, 10], "edit": [1, 10], "underl": 1, "manual": [1, 8, 10], "previous": 1, "reduc": [1, 2, 10], "18": [1, 8], "zero": [1, 5, 6], "doubl": [1, 5, 6], "previou": [1, 8], "re": [1, 2], "desir": [1, 2], "similarli": 1, "stage": 1, "demonstr": [1, 6, 8], "dataexport": [1, 2, 5], "csv_export": [1, 2], "output_loc": [1, 2], "output_nam": [1, 2], "test_export": 1, "lt": [1, 5], "0x7f22ff8d5ee0": 1, "gt": [1, 5], "page": [2, 4], "sphinx": 2, "automat": [2, 6, 10], "scan": 2, "sourc": 2, "load_pandasdata": 2, "input_data": 2, "particle_typ": [2, 5, 6], "none": [2, 5, 6, 7], "__unit_config__": [2, 10], "unitset": [2, 10], "object": [2, 3, 7, 8], "load": [2, 5, 6, 8], "format": [2, 4, 5, 6], "intern": [2, 10], "extern": 2, "case": [2, 5, 7, 8], "dedic": 2, "pd": 2, "demo_data": 2, "datafram": 2, "load_tibaraydata": 2, "ascii": [2, 6], "tibarai": 2, "rxy": 2, "bx": 2, "By": [2, 10], "bz": 2, "g": [2, 7, 8, 10], "nmacro": 2, "rmacro": 2, "data_loc": [2, 5, 6], "tibaray_test": 2, "dat": [2, 5, 6], "read": [2, 3, 4, 5, 6], "both": [2, 6, 8], "binari": 2, "file": [2, 5, 6, 7], "behind": 2, "scene": 2, "reli": 2, "topas2numpi": 2, "load_p2sat_txt": 2, "adapt": 2, "p2sat": 2, "txt": 2, "csv": 2, "um": [2, 10], "hard": [2, 8], "seper": [2, 3], "available_unit": [2, 10], "particlephasespaceunit": [2, 5, 10], "data_url": 2, "http": [2, 4], "raw": 2, "githubusercont": 2, "com": [2, 4], "lesnat": 2, "master": 2, "exampl": [2, 4, 5, 6, 7, 10], "examplephasespac": 2, "file_nam": 2, "p2sat_txt_test": 2, "urlretriev": 2, "p2_sat_uhi": [2, 10], "_particlephasespac": [2, 5, 6, 8], "data_load": 2, "hold": 2, "allow": [2, 4, 5, 8], "user": [2, 6, 8], "utilis": [2, 8], "common": 2, "It": 2, "accept": 2, "paramet": [2, 3, 8], "_dataloadersbas": [2, 5, 6], "assess_density_versus_r": 2, "rval": 2, "verbos": 2, "bool": 2, "str": [2, 5], "assess": 2, "how": [2, 6, 7, 8], "radiu": 2, "linspac": 2, "21": 2, "screen": 2, "option": [2, 7, 8], "main": 2, "direct": 2, "travel": 2, "default": [2, 10], "return": 2, "density_data": 2, "contain": [2, 6], "roi": 2, "val": 2, "proport": 2, "insid": [2, 7], "calculate_twiss_paramet": 2, "twiss": [2, 3, 8], "fill_beta_and_gamma": [2, 7], "factor": [2, 7, 10], "self": [2, 5, 6, 10], "_ps_data": 2, "fill_direction_cosin": [2, 7], "cosin": 2, "requir": [2, 3, 4, 5, 6, 8, 10], "respect": 2, "momementum": 2, "fill_relativistic_mass": [2, 7], "relativist": [2, 7], "fill_rest_mass": [2, 7], "fill_veloc": [2, 7], "veloc": [2, 7, 10], "filter_by_boolean_index": [2, 8], "boolean_index": [2, 8], "in_plac": [2, 8], "split": [2, 7, 8], "filter": [2, 8], "input": [2, 5, 6], "boolean": 2, "index": [2, 4], "keep": 2, "discard": [2, 8], "1d": 2, "arrai": 2, "structur": 2, "modifi": 2, "two": [2, 6, 7, 8], "boolan_index": 2, "equal": 2, "filter_by_tim": 2, "t_start": 2, "t_finish": 2, "inclus": 2, "specfi": 2, "float": 2, "particleswith": 2, "new_inst": 2, "get_downsampled_phase_spac": [2, 8], "downsample_factor": 2, "int": 2, "randomlt": 2, "sampl": [2, 3, 4], "larger": [2, 8], "size": 2, "origin": [2, 3], "shuffl": 2, "being": 2, "downsampl": [2, 3], "merg": 2, "combin": 2, "typic": 2, "regrid": 2, "algorithm": 2, "develop": [2, 6], "leo": 2, "esnault": 2, "new_p": [2, 8], "n_bin": 2, "histogram": [2, 8], "paritcl": 2, "each": [2, 7, 10], "spci": 2, "overlaid": 2, "bin": 2, "turn": [2, 8], "off": [2, 8], "plot_momentum_hist_1d": [2, 8], "control": 2, "transpar": 2, "plot_n_particles_v_tim": 2, "quickli": 2, "bunch": 2, "appli": [2, 8], "quantiti": [2, 3, 7, 8, 10], "log_scal": 2, "normal": 2, "vmin": 2, "vmax": 2, "2d": 2, "either": [2, 8, 9], "particul": 2, "set": [2, 3, 5, 7, 8], "n_pixel": 2, "rang": [2, 8], "maximum": [2, 8], "otherwis": 2, "weight_position_plot": [2, 6], "gaussian": [2, 3, 4], "kde": [2, 3, 4], "inform": 2, "slow": [2, 6], "could": [2, 8], "try": [2, 8], "definit": [2, 9, 10], "overlai": 2, "onto": 2, "summari": 2, "json": 2, "specifi": [2, 5, 6], "thei": [2, 6, 8], "filenam": 2, "directori": 2, "project_particl": 2, "distanc": 2, "project": 2, "forward": [2, 6], "back": 2, "serv": [2, 4, 8], "crude": 2, "advanc": 2, "transport": 2, "up": [2, 3, 4], "absenc": 2, "forc": 2, "far": 2, "its": 2, "good": [2, 5, 8], "close": [2, 8], "50": 2, "rebin": 2, "singl": 2, "integ": [2, 7], "per": [2, 7], "resample_via_gaussian_kd": [2, 8], "n_new_particles_factor": [2, 8], "interpolate_weight": [2, 8], "base": [2, 8], "fit": [2, 8], "kernel": [2, 8], "densiti": [2, 8], "estim": [2, 8], "d": 2, "attempt": [2, 5, 7], "interpol": 2, "within": 2, "7d": 2, "experiment": [2, 8], "extrem": [2, 8], "caution": [2, 8], "len": [2, 5, 6, 8], "word": 2, "column": [2, 3, 4, 5, 6, 10], "delet": 2, "whenev": [2, 8, 10], "footprint": 2, "set_unit": [2, 10], "new_unit": 2, "reset": [2, 3, 10], "sort": 2, "quantities_to_sort": 2, "accord": 2, "order": [2, 7], "place": 2, "phasespaceinst": 2, "particular": 2, "text": [2, 6], "topas_export": 2, "output": [2, 8], "featur": [2, 5, 6], "everi": [2, 10], "flag": 2, "histori": 2, "data": [3, 4, 7], "addit": [3, 6], "phase": [3, 4, 5, 6], "space": [3, 4, 5, 6], "analyt": 3, "ad": [3, 4], "subtract": 3, "manipul": [3, 4], "export": [3, 4, 6], "loader": [3, 4, 5], "after": 3, "down": [3, 4], "larg": 3, "hoc": 3, "clean": 3, "compar": [3, 10], "github": 4, "bwheelz36": 4, "aim": 4, "python": [4, 8], "analys": 4, "support": 4, "document": [4, 7, 9], "modul": 4, "search": 4, "similar": 5, "process": 5, "sai": 5, "match": [5, 8, 10], "those": [5, 8], "mm_mev": [5, 10], "To": [5, 7], "creat": [5, 10], "_dataexportersbas": 5, "__particle_config__": [5, 6, 9], "particle_cfg": [5, 6], "newdataexport": 5, "def": [5, 6], "_define_required_column": 5, "_export_data": 5, "_set_expected_unit": 5, "job": [5, 6], "blank": 5, "must": [5, 6, 7, 10], "These": [5, 7, 8], "name": [5, 6, 7, 8, 9, 10], "specif": 5, "set_expected_unit": 5, "receiv": [5, 6], "correct": [5, 6, 10], "happen": [5, 8], "hand": 5, "_required_column": 5, "_expected_unit": 5, "_output_nam": 5, "suffix": [5, 6], "els": 5, "writefilepath": 5, "_output_loc": 5, "header": [5, 6], "ty": [5, 6], "tz": [5, 6], "tpx": [5, 6], "tpy": [5, 6], "tpz": [5, 6], "te": [5, 6], "_p": 5, "to_numpi": 5, "transpos": 5, "formatspec": 5, "5f": 5, "savetxt": 5, "fmt": 5, "delimit": 5, "comment": 5, "ps_electron": 5, "test_new_export": 5, "__main__": 5, "0x7fee96a1ad90": 5, "verifi": 5, "recycl": 5, "__": [5, 6], "wrote": 5, "newdataload": [5, 6], "_import_data": [5, 6], "loadtxt": [5, 6], "_input_data": [5, 6], "skiprow": [5, 6], "particle_properti": [5, 6, 9], "_particle_typ": [5, 6], "ones": [5, 6, 7], "arang": [5, 6], "replac": [5, 6], "convers": [5, 6, 10], "consisten": [5, 6], "_check_energy_consist": [5, 6], "_check_input_data": [5, 6], "is_fil": [5, 6], "rais": [5, 6], "filenotfounderror": [5, 6], "doe": [5, 6, 10], "right": [5, 6], "extens": [5, 6], "except": [5, 6], "open": [5, 6], "first_lin": [5, 6], "readlin": [5, 6], "One": 6, "easi": [6, 10], "inhereit": 6, "_dataimportersbas": 6, "provid": 6, "whatev": 6, "suppli": 6, "etc": [6, 7], "pre": [6, 10], "error": 6, "__import_data": 6, "fundament": [6, 7, 8], "popul": 6, "attribut": 6, "succesfulli": 6, "guarante": [6, 8], "am": [6, 8], "go": [6, 8], "colleagu": 6, "encod": [6, 7], "pretti": [6, 8], "straight": 6, "includ": 6, "enter": 6, "complet": [6, 8, 10], "_column": 6, "ok": [6, 8], "new_data_loader_demo": 6, "__phase_space_config": 7, "categori": 7, "impli": [7, 8], "core": 7, "free": 7, "allowed_column": 7, "associ": 7, "test_all_allowed_columns_can_be_fil": 7, "test_particlephasespac": 7, "descript": 7, "statist": 7, "record": 7, "fill_absolute_momentum": 7, "beta_x": 7, "beta_i": 7, "beta_z": 7, "beta_ab": 7, "lorentz": 7, "vx": 7, "vy": 7, "vz": 7, "sever": 7, "rather": 7, "live": 7, "notebook": 7, "them": [7, 8], "hopefulli": 7, "trivial": 7, "help": 7, "properti": 7, "math": 7, "someth": 7, "p_x": 7, "directioncosine_x": 7, "rest_energi": 7, "511": [7, 9], "form": [7, 10], "somewhat": 7, "unusu": 7, "p_ev_c": 7, "p_si": 7, "p_mev_c": 7, "1e": [7, 10], "othertim": 8, "too": 8, "qualiti": 8, "mont": 8, "carlo": 8, "independ": 8, "primari": 8, "expens": 8, "task": 8, "tutori": 8, "solv": 8, "issu": 8, "further": 8, "warn": 8, "approach": 8, "heurist": 8, "undertak": 8, "care": [8, 10], "comparison": 8, "intend": 8, "matplotlib": 8, "pyplot": 8, "plt": 8, "dens": 8, "argu": 8, "don": [8, 10], "my": 8, "properli": 8, "probabl": 8, "Of": 8, "cours": 8, "preserv": [8, 10], "A": 8, "sophist": 8, "function": 8, "challen": 8, "problem": 8, "seven": 8, "dimens": 8, "about": [8, 10], "correl": 8, "popular": 8, "choic": 8, "appear": 8, "sensit": 8, "tail": 8, "prone": 8, "long": [8, 10], "idea": 8, "nearli": 8, "li": 8, "outsid": 8, "filter_input_data": 8, "spatial_cutoff": 8, "keep_ind": 8, "logical_and": 8, "ps_discard": 8, "account": 8, "86": 8, "principl": 8, "model": 8, "littl": 8, "entri": 8, "265149": 8, "132574": 8, "home": 8, "1286": 8, "userwarn": 8, "old": 8, "ensur": [8, 10], "enough": 8, "implement": 8, "improv": 8, "aren": 8, "Such": 8, "fashion": 8, "leav": 8, "individu": 8, "neg": 8, "big": 8, "chunk": 8, "partilc": 8, "although": 8, "haven": 8, "shown": 8, "well": 8, "reflect_pz": 8, "closer": 8, "recomend": 8, "bit": 8, "disast": 8, "few": 8, "outlier": 8, "caus": 8, "higher": 8, "remove_high_divergence_particl": 8, "div_x": 8, "div_i": 8, "max_div_x": 8, "max_div_i": 8, "rem_ind": 8, "logical_or": 8, "logical_not": 8, "089075": 8, "089526": 8, "568640": 8, "563796": 8, "168591": 8, "133908": 8, "214531": 8, "214849": 8, "201866": 8, "178720": 8, "267062": 8, "277615": 8, "992315": 8, "371044": 8, "358025": 8, "319506": 8, "emitt": 8, "doesn": 8, "perfectli": 8, "terribl": 8, "anymor": 8, "mang": 8, "23": 8, "131593": 8, "41": 8, "09": 8, "reason": 8, "guess": 8, "excercis": 8, "fail": 8, "badli": 8, "upsampl": 8, "mention": 8, "consid": 8, "accuraci": 8, "specfic": 8, "applic": 8, "rest_mass": 9, "602": 9, "proton": 9, "2212": 9, "938": 9, "272": 9, "neutron": 9, "2112": 9, "939": 9, "565": 9, "simpl": 9, "dictionari": 9, "some_new_particl": 9, "rest_mass_in_mev": 9, "charge_in_coulomb": 9, "alia": 9, "enabl": 9, "part": 9, "pdg_code_new_particl": 9, "varieti": 10, "convent": 10, "There": 10, "program": 10, "cm_mev": 10, "length": 10, "cm": 10, "m_ev": 10, "um_kev": 10, "kev": 10, "pick": 10, "my_unit": 10, "equivalal": 10, "come": 10, "later": 10, "unti": 10, "different_unit": 10, "get_unit": 10, "971": 10, "176758": 10, "817": 10, "280090": 10, "396000": 10, "855738": 10, "508804": 10, "3184": 10, "060481": 10, "916": 10, "197754": 10, "839": 10, "297668": 10, "894435": 10, "249210": 10, "1560": 10, "114059": 10, "5258": 10, "901367": 10, "11318": 10, "419922": 10, "193": 10, "061367": 10, "377": 10, "103855": 10, "1219": 10, "741850": 10, "15326": 10, "970703": 10, "25628": 10, "898438": 10, "102": 10, "888760": 10, "362": 10, "594239": 10, "1414": 10, "843426": 10, "241": 10, "947769": 10, "401": 10, "025604": 10, "191501": 10, "469658": 10, "209": 10, "231939": 10, "graph": 10, "automatical": 10, "advis": 10, "__init__": 10, "copi": 10, "unit_set": 10, "subject": 10, "dimensionless": 10, "prefer": 10, "_unit": 10, "cm_kev": 10, "length_unit": 10, "energy_unit": 10, "1e3": 10, "momentum_unit": 10, "time_unit": 10, "mass_unit": 10, "velocity_unit": 10, "kmph": 10, "mainli": 10, "compris": 10, "explanatori": 10, "THe": 10, "converion": 10, "value_in_mm": 10, "value_in_cm": 10, "cm_convers": 10, "Be": 10, "defint": 10, "without": 10, "substantiali": 10}, "objects": {"ParticlePhaseSpace": [[2, 0, 0, "-", "DataExporters"], [2, 0, 0, "-", "DataLoaders"], [2, 0, 0, "-", "_ParticlePhaseSpace"]], "ParticlePhaseSpace.DataExporters": [[2, 1, 1, "", "CSV_Exporter"], [2, 1, 1, "", "Topas_Exporter"]], "ParticlePhaseSpace.DataLoaders": [[2, 1, 1, "", "Load_PandasData"], [2, 1, 1, "", "Load_TibarayData"], [2, 1, 1, "", "Load_TopasData"], [2, 1, 1, "", "Load_p2sat_txt"]], "ParticlePhaseSpace._ParticlePhaseSpace": [[2, 1, 1, "", "PhaseSpace"]], "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace": [[2, 2, 1, "", "assess_density_versus_r"], [2, 2, 1, "", "calculate_twiss_parameters"], [2, 2, 1, "", "fill_beta_and_gamma"], [2, 2, 1, "", "fill_direction_cosines"], [2, 2, 1, "", "fill_kinetic_E"], [2, 2, 1, "", "fill_relativistic_mass"], [2, 2, 1, "", "fill_rest_mass"], [2, 2, 1, "", "fill_velocity"], [2, 2, 1, "", "filter_by_boolean_index"], [2, 2, 1, "", "filter_by_time"], [2, 2, 1, "", "get_downsampled_phase_space"], [2, 2, 1, "", "merge"], [2, 2, 1, "", "plot_energy_hist_1D"], [2, 2, 1, "", "plot_momentum_hist_1D"], [2, 2, 1, "", "plot_n_particles_v_time"], [2, 2, 1, "", "plot_particle_positions_hist_2D"], [2, 2, 1, "", "plot_particle_positions_scatter_2D"], [2, 2, 1, "", "plot_position_hist_1D"], [2, 2, 1, "", "plot_transverse_trace_space_hist_2D"], [2, 2, 1, "", "plot_transverse_trace_space_scatter_2D"], [2, 2, 1, "", "print_energy_stats"], [2, 2, 1, "", "print_twiss_parameters"], [2, 2, 1, "", "project_particles"], [2, 2, 1, "", "regrid"], [2, 2, 1, "", "resample_via_gaussian_kde"], [2, 2, 1, "", "reset_phase_space"], [2, 2, 1, "", "set_units"], [2, 2, 1, "", "sort"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"]}, "titleterms": {"express": 0, "bend": 0, "radiu": 0, "kinet": 0, "energi": [0, 7, 8], "basic": 1, "exampl": [1, 3, 8], "data": [1, 2, 5, 6, 8, 10], "import": 1, "calcul": 1, "addit": 1, "quantiti": 1, "reset": 1, "phase": [1, 2, 7, 8], "space": [1, 2, 7, 8], "requir": [1, 7], "column": [1, 7], "analyt": 1, "seper": 1, "ad": [1, 8, 9], "subtract": 1, "object": 1, "twiss": 1, "paramet": 1, "manipul": 1, "export": [1, 2, 5], "code": 2, "document": 2, "loader": [2, 6], "particl": [2, 8, 9], "particlephasespac": 4, "content": 4, "indic": 4, "tabl": 4, "write": [5, 6], "new": [5, 6, 9, 10], "test": 5, "format": 7, "allow": 7, "unit": [7, 10], "read": [7, 10], "momentum": [7, 8], "If": 7, "direct": 7, "cosin": 7, "ar": 7, "specifi": 7, "beta": 7, "gamma": 7, "i": 7, "si": 7, "up": 8, "down": 8, "sampl": 8, "us": 8, "gaussian": 8, "kde": 8, "downsampl": 8, "larg": 8, "clean": 8, "input": 8, "hoc": 8, "step": 8, "reflect": 8, "pz": 8, "remov": 8, "high": 8, "diverg": 8, "compar": 8, "origin": 8, "posit": 8, "support": 9, "work": 10, "differ": 10, "avail": 10, "set": 10, "chang": 10, "after": 10, "defin": 10}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "nbsphinx": 4, "sphinx": 57}, "alltitles": {"Express bending radius in kinetic energy": [[0, "express-bending-radius-in-kinetic-energy"]], "Basic Example": [[1, "Basic-Example"]], "Data import": [[1, "Data-import"]], "Calculation of additional quantities": [[1, "Calculation-of-additional-quantities"]], "Reset the phase space to required columns": [[1, "Reset-the-phase-space-to-required-columns"]], "Basic analytics": [[1, "Basic-analytics"]], "Seperating, adding, and subtracting phase space objects": [[1, "Seperating,-adding,-and-subtracting-phase-space-objects"]], "Twiss parameters": [[1, "Twiss-parameters"]], "Manipulating data in the phase space": [[1, "Manipulating-data-in-the-phase-space"]], "Exporting the data": [[1, "Exporting-the-data"]], "Code Documentation": [[2, "code-documentation"]], "Data Loaders": [[2, "module-ParticlePhaseSpace.DataLoaders"]], "Particle Phase Space": [[2, "module-ParticlePhaseSpace._ParticlePhaseSpace"]], "Data Exporters": [[2, "module-ParticlePhaseSpace.DataExporters"]], "Examples": [[3, "examples"]], "Examples:": [[3, null]], "ParticlePhaseSpace": [[4, "particlephasespace"]], "Contents:": [[4, null]], "Indices and tables": [[4, "indices-and-tables"]], "Writing a new data exporter": [[5, "Writing-a-new-data-exporter"]], "Testing the data export": [[5, "Testing-the-data-export"]], "Writing a new data loader": [[6, "Writing-a-new-data-loader"]], "Phase Space Format": [[7, "phase-space-format"]], "Required Columns": [[7, "required-columns"]], "Allowed Columns": [[7, "allowed-columns"]], "Units": [[7, "units"]], "Reading in momentum": [[7, "reading-in-momentum"]], "If energy/ direction cosines are specified:": [[7, "if-energy-direction-cosines-are-specified"]], "If beta/ gamma specified": [[7, "if-beta-gamma-specified"]], "If momentum is specified in SI units": [[7, "if-momentum-is-specified-in-si-units"]], "Up/Down sampling phase space data using gaussian KDE": [[8, "Up/Down-sampling-phase-space-data-using-gaussian-KDE"]], "Example: Downsampling a large phase space": [[8, "Example:-Downsampling-a-large-phase-space"]], "Clean input data": [[8, "Clean-input-data"]], "Ad-hoc data cleaning steps": [[8, "Ad-hoc-data-cleaning-steps"]], "Reflect Pz": [[8, "Reflect-Pz"]], "Remove high divergence particles": [[8, "Remove-high-divergence-particles"]], "Compare original to downsampled:": [[8, "Compare-original-to-downsampled:"]], "Energy": [[8, "Energy"]], "Momentum": [[8, "Momentum"]], "Particle Positions": [[8, "Particle-Positions"]], "Supported particles": [[9, "supported-particles"]], "Adding new particles": [[9, "adding-new-particles"]], "Working with different units": [[10, "Working-with-different-units"]], "Available units": [[10, "Available-units"]], "Setting units at data read in": [[10, "Setting-units-at-data-read-in"]], "Changing units after read in": [[10, "Changing-units-after-read-in"]], "Defining new unit sets": [[10, "Defining-new-unit-sets"]]}, "indexentries": {"csv_exporter (class in particlephasespace.dataexporters)": [[2, "ParticlePhaseSpace.DataExporters.CSV_Exporter"]], "load_pandasdata (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_PandasData"]], "load_tibaraydata (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_TibarayData"]], "load_topasdata (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_TopasData"]], "load_p2sat_txt (class in particlephasespace.dataloaders)": [[2, "ParticlePhaseSpace.DataLoaders.Load_p2sat_txt"]], "particlephasespace.dataexporters": [[2, "module-ParticlePhaseSpace.DataExporters"]], "particlephasespace.dataloaders": [[2, "module-ParticlePhaseSpace.DataLoaders"]], "particlephasespace._particlephasespace": [[2, "module-ParticlePhaseSpace._ParticlePhaseSpace"]], "phasespace (class in particlephasespace._particlephasespace)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace"]], "topas_exporter (class in particlephasespace.dataexporters)": [[2, "ParticlePhaseSpace.DataExporters.Topas_Exporter"]], "assess_density_versus_r() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.assess_density_versus_r"]], "calculate_twiss_parameters() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.calculate_twiss_parameters"]], "fill_beta_and_gamma() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.fill_beta_and_gamma"]], "fill_direction_cosines() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.fill_direction_cosines"]], "fill_kinetic_e() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.fill_kinetic_E"]], "fill_relativistic_mass() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.fill_relativistic_mass"]], "fill_rest_mass() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.fill_rest_mass"]], "fill_velocity() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.fill_velocity"]], "filter_by_boolean_index() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.filter_by_boolean_index"]], "filter_by_time() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.filter_by_time"]], "get_downsampled_phase_space() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.get_downsampled_phase_space"]], "merge() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.merge"]], "module": [[2, "module-ParticlePhaseSpace.DataExporters"], [2, "module-ParticlePhaseSpace.DataLoaders"], [2, "module-ParticlePhaseSpace._ParticlePhaseSpace"]], "plot_energy_hist_1d() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_energy_hist_1D"]], "plot_momentum_hist_1d() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_momentum_hist_1D"]], "plot_n_particles_v_time() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_n_particles_v_time"]], "plot_particle_positions_hist_2d() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_particle_positions_hist_2D"]], "plot_particle_positions_scatter_2d() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_particle_positions_scatter_2D"]], "plot_position_hist_1d() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_position_hist_1D"]], "plot_transverse_trace_space_hist_2d() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_transverse_trace_space_hist_2D"]], "plot_transverse_trace_space_scatter_2d() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.plot_transverse_trace_space_scatter_2D"]], "print_energy_stats() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.print_energy_stats"]], "print_twiss_parameters() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.print_twiss_parameters"]], "project_particles() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.project_particles"]], "regrid() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.regrid"]], "resample_via_gaussian_kde() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.resample_via_gaussian_kde"]], "reset_phase_space() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.reset_phase_space"]], "set_units() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.set_units"]], "sort() (particlephasespace._particlephasespace.phasespace method)": [[2, "ParticlePhaseSpace._ParticlePhaseSpace.PhaseSpace.sort"]]}})